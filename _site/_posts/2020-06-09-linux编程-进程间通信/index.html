<p>[toc]</p>

<h1 id="管道">管道</h1>

<h2 id="内核提供单工自同步机制">内核提供,单工,自同步机制</h2>

<h2 id="匿名管道">匿名管道</h2>

<p>pipe</p>

<blockquote>
  <p>create pipe</p>
</blockquote>

<pre><code class="language-c">#include &lt;unistd.h&gt;
int pipe(int pipefd[2]);
#define _GNU_SOURCE             /* See feature_test_macros(7) */
#include &lt;fcntl.h&gt;              /* Obtain O_* constant definitions */
#include &lt;unistd.h&gt;
int pipe2(int pipefd[2], int flags);
</code></pre>

<h2 id="命名管道">命名管道</h2>

<h1 id="xsi">XSI</h1>

<p>IPC -&gt; Internet Process Communication</p>

<pre><code class="language-sh">ipcs
</code></pre>

<p>key:ftok</p>

<blockquote>
  <p>convert  a pathname and a project identifier to a System V IPC key</p>
</blockquote>

<pre><code class="language-c">#include &lt;sys/types.h&gt;
#include &lt;sys/ipc.h&gt;
key_t ftok(const char *pathname, int proj_id);
</code></pre>

<p>Message Queues</p>

<ul>
  <li>msgget</li>
</ul>

<blockquote>
  <p>get a System V message queue identifier</p>
</blockquote>

<pre><code class="language-c">#include &lt;sys/types.h&gt;
#include &lt;sys/ipc.h&gt;
#include &lt;sys/msg.h&gt;
int msgget(key_t key, int msgflg);
</code></pre>

<ul>
  <li>msgop</li>
</ul>

<blockquote>
  <p>System V message queue operations</p>
</blockquote>

<pre><code class="language-c">#include &lt;sys/types.h&gt;
#include &lt;sys/ipc.h&gt;
#include &lt;sys/msg.h&gt;
int msgsnd(int msqid, const void *msgp, size_t msgsz, int msgflg);
ssize_t msgrcv(int msqid, void *msgp, size_t msgsz, long msgtyp,
int msgflg);
</code></pre>

<ul>
  <li>msgctl</li>
</ul>

<blockquote>
  <p>System V message control operations</p>
</blockquote>

<pre><code class="language-c">#include &lt;sys/types.h&gt;
#include &lt;sys/ipc.h&gt;
#include &lt;sys/msg.h&gt;
int msgctl(int msqid, int cmd, struct msqid_ds *buf);
</code></pre>

<p>Semaphore Arrays</p>

<ul>
  <li>semget</li>
  <li>semop</li>
  <li>semctl</li>
</ul>

<p>Shared Memory</p>

<ul>
  <li>shmget</li>
  <li>shmop</li>
  <li>shmctl</li>
</ul>

<h1 id="网络套接字socket">网络套接字socket</h1>

<h2 id="字节序问题">字节序问题</h2>

<p>大端:低地址放高字节</p>

<p>小端:低地址放低字节</p>

<h2 id="报式套接字">报式套接字</h2>

<ul>
  <li>socket</li>
</ul>

<blockquote>
  <p>create an endpoint for communication</p>
</blockquote>

<pre><code class="language-c">#include &lt;sys/types.h&gt;          /* See NOTES */
#include &lt;sys/socket.h&gt;
int socket(int domain, int type, int protocol);
</code></pre>

<ul>
  <li>bind</li>
</ul>

<blockquote>
  <p>bind a name to a socket</p>
</blockquote>

<pre><code class="language-c">#include &lt;sys/types.h&gt;          /* See NOTES */
#include &lt;sys/socket.h&gt;
int bind(int sockfd, const struct sockaddr *addr,
socklen_t addrlen);
</code></pre>

<ul>
  <li>sendto</li>
</ul>

<blockquote>
  <p>send a message on a socket</p>
</blockquote>

<pre><code class="language-c">#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;
ssize_t send(int sockfd, const void *buf, size_t len, int flags);
ssize_t sendto(int sockfd, const void *buf, size_t len, int flags,
const struct sockaddr *dest_addr, socklen_t addrlen);
ssize_t sendmsg(int sockfd, const struct msghdr *msg, int flags);
</code></pre>

<ul>
  <li>
    <p>rcvfrom</p>
  </li>
  <li>
    <p>inet_pton</p>
  </li>
</ul>

<blockquote>
  <p>convert IPv4 and IPv6 addresses from text to binary form</p>
</blockquote>

<pre><code class="language-c">#include &lt;arpa/inet.h&gt;
int inet_pton(int af, const char *src, void *dst);
</code></pre>

<ul>
  <li>inet_ntop</li>
</ul>

<blockquote>
  <p>convert IPv4 and IPv6 addresses from binary to text form</p>
</blockquote>

<pre><code class="language-c">#include &lt;arpa/inet.h&gt;
const char *inet_ntop(int af, const void *src,
char *dst, socklen_t size);
</code></pre>

<ul>
  <li>
    <p>getsockopt</p>
  </li>
  <li>
    <p>setsockopt</p>
  </li>
</ul>

<blockquote>
  <p>get and set options on sockets</p>
</blockquote>

<pre><code class="language-c">#include &lt;sys/types.h&gt;          /* See NOTES */
#include &lt;sys/socket.h&gt;
int getsockopt(int sockfd, int level, int optname,
void *optval, socklen_t *optlen);
int setsockopt(int sockfd, int level, int optname,
const void *optval, socklen_t optlen);
</code></pre>

<h3 id="多点通讯">多点通讯</h3>

<ul>
  <li>广播
    <ul>
      <li>全网广播</li>
      <li>子网广播</li>
    </ul>
  </li>
  <li>多播/组播</li>
</ul>

<h2 id="流式套接字">流式套接字</h2>
